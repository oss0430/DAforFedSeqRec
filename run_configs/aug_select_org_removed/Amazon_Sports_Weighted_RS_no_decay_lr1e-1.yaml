use_gpu: True
device: 1
early_stop:
  patience: 1000
federate:
  mode: standalone
  method : shadow_with_fedex_weighted
  total_round_num: 30000
  client_num: 16 # 6040
  sample_client_num: 16
  sample_client_rate: -1.0
  make_global_eval : True
  save_to: "../../../../data1/donghoon/FederatedScopeData/exp/amazon_sports/0930_Weighted_Augmentation_Selection_RS_lr1-e1_no_decay.pt"
  standalone_args :
    use_shadow : True
    shadow_client_num : 35598
    use_one_hop_eval : True
data:
  root: ../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/
  partitioned_df_path : '../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/shuffle' ## not going to use
  type: sr_data
  consistent_label_distribution: False ## This can be only used when the datasets are sorted by user_ids
  splitter : sr_splitter
  min_sequence_length: 5
  max_sequence_length: 50
  user_num: 35598
  item_num: 18357
  augmentation_args :
    augmentation_column : 'augmentation_idx:token'
    use_augmentation : True
    max_augmentation_idx : 9 ## load all augmentations
    is_zero_original : False
    is_multiple : True
    aug_types_count : 9 ## aug types
    df_paths : ['../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/split',
                '../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/random_pushing_left_5_10_no_original',
                '../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/random_replacing_0.1_no_original',
                '../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/random_replacing_0.2_no_original',
                '../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/random_replacing_0.3_no_original',
                '../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/random_replacing_0.4_no_original',
                '../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/random_replacing_0.5_no_original',
                '../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/self_sampled_pushing_left_5_10_no_original',
                '../../../../data1/donghoon/FederatedScopeData/Amazon_Sports_and_Outdoors_5core/shuffle_no_original'
                ]
  augmentation_controller :
    type : 'rs' ## 'mab', 'epsilon_greedy', 'thompson', 'sliding_window', 'mdp'
    args : 
      decay_rate : 1.0
      alpha : 2.0
      epsilon : 0.1
      window_size : 100
      lr : 0.1
      gamma : 0.9
      max_addative_noise : 0.1 ## Random Search
      perturbation_num : 100 ## Gaussian Process
      reward_type : 'train_avg_loss'
dataloader :
  type : base
  batch_size : 1
model:
  type: sasrec
  hidden_dropout_prob: 0.0
  attn_dropout_prob: 0.0
  pretrained_model_path : ""
  hidden_size: 64
  item_num : 18357
train:
  batch_or_epoch : 'batch'
  local_update_steps: 20
  optimizer:
    lr: 0.01
criterion:
  type: CrossEntropyLoss
trainer:
  type: sasrec_trainer
eval:
  freq: 1000
  metrics: ['recall_10','recall_20','ndcg_10','ndcg_20']
  split : ['val', 'test']
  best_res_update_round_wise_key: test_avg_loss
  count_flops: False
