use_gpu: True
device: 0
early_stop:
  patience: 5
federate:
  mode: standalone
  method : shadow
  total_round_num: 30000
  client_num: 16 # 6040
  sample_client_num: 16
  sample_client_rate: -1.0
  make_global_eval : False
  save_to: "../../../../data1/donghoon/FederatedScopeData/exp/ml-1m/0822_cut-aug_left_after_random_replace_plus_30K.pt"
  standalone_args :
    use_shadow : True
    shadow_client_num : 6040
    use_one_hop_eval : True
data:
  root: ../../../../data1/donghoon/FederatedScopeData/ml-1m/
  partitioned_df_path : '../../../../data1/donghoon/FederatedScopeData/ml-1m/cut_from_left'
  type: sr_data
  consistent_label_distribution: False
  splitter : sr_splitter
  augmentation_column : 'augmentation_idx:token'
  use_augmentation : True
  max_augmentation_idx : 10 ## 1 + 10 augmentations
dataloader :
  type : base
  batch_size : 1
model:
  type: sasrec
  hidden_dropout_prob: 0.0
  attn_dropout_prob: 0.0
  pretrained_model_path : "../../../../data1/donghoon/FederatedScopeData/exp/ml-1m/Augmentation_Models/0813_rand-replace-aug_1e-1_hidden_size_64_CE_lr1-e4_epoch_1_shadow_round_30K.pt"
train:
  batch_or_epoch : 'epoch'
  local_update_steps: 1
  optimizer:
    lr: 0.001
criterion:
  type: CrossEntropyLoss
trainer:
  type: sasrec_trainer
eval:
  freq: 250
  metrics: ['recall_10','recall_20','ndcg_10','ndcg_20']
  split : ['val', 'test']
  best_res_update_round_wise_key: test_avg_loss
  count_flops: False
#attack :
#  attack_method : 'sr_targeted_segment_sasrec'
#  attacker_id : []
#  segment_item_ids : [2858, 260, 1196, 1210, 480, 2028, 589, 2571, 1270, 593, 1580, 1198, 608, 2762, 110, 2396, 1197, 527, 1617, 1265]
#  target_item_id : 2308
#  covisitation : True